--- # ceedling project file for iOS
:mixins:
  :enabled:
    - base
    - wolfssl
    - ios_tvos
  :load_paths:
    - ceedling
    - ceedling/mixins

:dependencies:
  :deps:
    - :name: WolfSSL
      :paths:
        :source: third_party/wolfssl/source
        :build: third_party/wolfssl/build
        :artifact: third_party/wolfssl/install/wolfssl_ios
      :fetch:
        :method: :git
        :source: $HE_WOLFSSL_SOURCE
        :tag: $HE_WOLFSSL_TAG
      :build:
        - git apply ../../../wolfssl/*.patch || true
        - autoreconf -i
        - cp ../../../ios/autotools-ios-helper.sh ./autotools-ios-helper.sh
        - PREFIX=$(pwd)/../install/wolfssl_ios ./autotools-ios-helper.sh -iphoneuniversal
      :artifacts:
        :includes:
          - include
        :static_libraries:
          - universal/libwolfssl.a

:environment:
  - MACOSX_DEPLOYMENT_TARGET: "12.0"
